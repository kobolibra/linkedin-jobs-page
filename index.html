<!-- 1. head é‡Œè¿½åŠ ç­›é€‰æ ·å¼ï¼ˆåªåŠ  3 è¡Œï¼‰ -->
<style>
  â€¦åŸæœ‰æ ·å¼â€¦
  .filter-bar { margin: 20px 0; display: flex; align-items: center; gap: 12px; }
  .filter-bar select { padding: 6px 12px; border: 1px solid #d1d5db; border-radius: 6px; background: #ffffff; color: #111827; font-size: 0.9em; }
  .job.hidden { opacity: 0; height: 0; margin: 0; padding: 0; border: 0; pointer-events: none; }
</style>

<!-- 2. h1 ä¸‹æ–¹æ’å…¥ç­›é€‰æ ï¼ˆåªåŠ  6 è¡Œ DOMï¼‰ -->
<h1>Latest LinkedIn Jobsï¼ˆä»¥é‡‘èç±»èŒä½ä¸ºä¸»ï¼ŒåŒ…æ‹¬CN/HK/SGï¼‰- ç¥æˆ‘ä»¬éƒ½èƒ½æ‹¿åˆ°dream offerğŸ‘
    https://kobolibra.github.io/linkedin-jobs-page/ </h1>
<div class="filter-bar">
  <label for="compFilter">ç­›é€‰å…¬å¸ï¼š</label>
  <select id="compFilter">
    <option value="all">å…¨éƒ¨</option>
  </select>
</div>
<div id="jobs"></div>

<!-- 3. script é‡Œè¿½åŠ ç­›é€‰é€»è¾‘ï¼ˆåªåŠ  10 è¡Œ JSï¼‰ -->
<script>
  fetch('jobs.json?_=' + new Date().getTime())
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById('jobs');
      const filter = document.getElementById('compFilter');
      let lastDate = '';

      // ç”Ÿæˆå…¬å¸ä¸‹æ‹‰ï¼ˆä¸é‡å¤ï¼‰
      [...new Set(data.map(j => j.company))].sort().forEach(c => {
        const opt = document.createElement('option');
        opt.value = c;
        opt.textContent = c;
        filter.appendChild(opt);
      });

      // ç­›é€‰äº‹ä»¶
      filter.addEventListener('change', () => {
        const val = filter.value;
        container.querySelectorAll('.job').forEach(card => {
          card.classList.toggle('hidden', val !== 'all' && card.dataset.comp !== val);
        });
      });

      // åŸæ¸²æŸ“é€»è¾‘ï¼ˆåªåŠ  1 è¡Œ datasetï¼‰
      data.forEach(job => {
        const jobDate = new Date(job.pushTime).toLocaleDateString('en-GB');
        if (jobDate !== lastDate) {
          const divider = document.createElement('div');
          divider.className = 'divider';
          divider.textContent = jobDate;
          container.appendChild(divider);
          lastDate = jobDate;
        }
        const div = document.createElement('div');
        div.className = 'job ' + (job.location || 'other').toLowerCase();
        div.dataset.comp = job.company;   // åªåŠ è¿™ä¸€è¡Œ
        div.innerHTML = `
          <a href="${job.link}" target="_blank">${job.title}</a>
          <div class="meta">${job.company} Â· ${job.location}</div>
          <div class="time">${jobDate}</div>
        `;
        container.appendChild(div);
      });
    });
</script>
</body>
</html>
